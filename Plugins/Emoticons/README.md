I didn't originally create this plugin but I made some changes to it. (adding the setting to opt out of emoticons and the functionality of that setting)
